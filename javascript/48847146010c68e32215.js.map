{"version":3,"sources":["webpack:///48847146010c68e32215.js","webpack:///./commenting-callback.js?60d9*","webpack:///./insight.js?2be9*","webpack:///./rating.js?f7d4","webpack:///./survey.js?caa7*","webpack:///./worker.highlight.js"],"names":["webpackJsonp",35,"module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_RESULT__","$","deferreds","comment-init","Deferred","sidenote-init","attach","type","handler","errorHandler","defer","promise","then","getPromise","resolve","valueObject","reject","call","undefined",36,"Trace","TraceCategory","util","window","insight","traceError","customTags","customTagsCount","customTagsBatchSize","debugConsoleLogEnabled","debugLogMsgs","debugLog","inMsg","push","console","log","getMetaTagContent","inMTName","myMTContent","length","content","e","setMetaTagContent","inMTContent","myMetaTag","document","createElement","name","getElementsByTagName","appendChild","attr","processWEDCSCustomEventFromArray","inArray","MscomCustomEvent","apply","this","wedcsLogTimer","processAllCustomTags","clearTimeout","array","key","addNewCustomTag","value","setTimeout","setupUnloadTracking","onbeforeunload","formatErrorObjectToWedcsArray","errorObject","error","isBubbled","data","JSON","stringify","substring","toString","message","source","lineno","colno","errorSubscriber","tArray","ex","subscribeErrors","Errors","subscribe","traceSubscriber","entry","navigationStart","performance","timing","category","perfEvent","customPerfArrary","timeStamp","getTime","join","subscribeTrace","commentSubscriber","widget","on","id","encodeURI","Date","commentErrorHandler","reason","sidenoteSubscriber","replace","sidenoteErrorHandler","setupLiveFyreTracking","commenting","commentPromise","sidenotePromise","firePageFocusEventAsync","firePageFocusEvent","setupPageFocusTracking","prevType","fireCopyEvent","txt","setupCopyTracking","bind","getSelection","fireSwitcherEvent","switcher","selectedValue","setupSwitcherTracking","change","val","scrollArea","inName","scrollNA","scrollQuarter","scrollHalf","scrollThreeQuarter","scrollBot","currScrollArea","scrollAreaList","setCurrScrollArea","inIndex","scrollBottomElement","scrollPageHeight","viewportBottom","refreshScrollPageDimVars","tBottom","getBoundingClientRect","top","pageYOffset","body","height","innerHeight","suppressMobileEvents","fireScrollEvent","inScrollValue","fireScrollEventSync","fireScrollEventAsync","fireScrollStopEvent","eventType","processScroll","stopEvent","scrollResizeTimer","innerWidth","tCurrPercent","Math","round","scrollTimer","setupScrollTracking","addEventListener","resize","extractMetaFromAmbientContext","AmbientContext","hasOwnProperty","String","append","getPerfTiming","keys","timeInfoArr","index","elapsed","biMapping","author","contentlang","depot_name","document_id","experiment_id","gitcommit","locale","original_content_git_url","pagetype","site_name","updated_at","setupBiTags","currentLocale","getLanguageFromUrl","strs","split","isGlobalMetadataEnabled","meta","listMSMetadata","res","arr","i","enableWEDCS","varClickTracking","varCustomerTracking","varAutoFirePV","route","ctrl","__WEBPACK_AMD_REQUIRE_ARRAY__","config","loadLibrary","paths","wedcs","ready","perfInfo","jQuery",37,"__WEBPACK_AMD_DEFINE_ARRAY__","metadata","environment","location","hostname","openFeedbackOptions","containerElementId","siteNameMetaName","documentMetaName","localeMetaName","uiLocale","get","propertyBag","ms.assetid",38,"t","c","n","o","s","a","SMCX","getElementById","async","src","protocol","parentNode","insertBefore",41,"Worker","p"],"mappings":"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","file":"48847146010c68e32215.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 35:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function($) {!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t    \"use strict\";\r\n\t\r\n\t    var deferreds = {\r\n\t        \"comment-init\": $.Deferred(),\r\n\t        \"sidenote-init\": $.Deferred()\r\n\t    };\r\n\t\r\n\t    module.exports.attach = function (type, handler, errorHandler) {\r\n\t        var defer = deferreds[type];\r\n\t        if (defer) {\r\n\t            defer.promise().then(handler, errorHandler);\r\n\t        }\r\n\t    };\r\n\t\r\n\t    module.exports.getPromise = function (type) {\r\n\t        var defer = deferreds[type];\r\n\t        if (defer) {\r\n\t            return defer.promise();\r\n\t        }\r\n\t        return null;\r\n\t    };\r\n\t\r\n\t    module.exports.resolve = function (type, valueObject) {\r\n\t        var defer = deferreds[type];\r\n\t        if (defer) {\r\n\t            defer.resolve(valueObject);\r\n\t        }\r\n\t    };\r\n\t\r\n\t    module.exports.reject = function (type, valueObject) {\r\n\t        var defer = deferreds[type];\r\n\t        if (defer) {\r\n\t            defer.reject(valueObject);\r\n\t        }\r\n\t    };\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ },\n\n/***/ 36:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {(function(){\r\n\t    \"use strict\";\r\n\t\r\n\t    var Trace = __webpack_require__(3),\r\n\t        TraceCategory = Trace.TraceCategory;\r\n\t    var util = __webpack_require__(30);\r\n\t    var perfEvents = __webpack_require__(21);\r\n\t\r\n\t    if (window.insight) {\r\n\t        Trace.traceError(\"insight.js is loaded more than once.\");\r\n\t        return;\r\n\t    }\r\n\t    var insight = {};\r\n\t    var customTags = {};\r\n\t    var customTagsCount = 0;\r\n\t    var customTagsBatchSize = 6;\r\n\t\r\n\t    insight.debugConsoleLogEnabled = false;\r\n\t    insight.debugLogMsgs = [];\r\n\t    insight.debugLog = function (inMsg) {\r\n\t        insight.debugLogMsgs.push(inMsg);\r\n\t        if (insight.debugConsoleLogEnabled) {\r\n\t            console.log(inMsg);\r\n\t        }\r\n\t    };\r\n\t    insight.getMetaTagContent = function (inMTName) {\r\n\t        try {\r\n\t            var myMTContent = $(\"meta[name='\" + inMTName + \"']\");\r\n\t            if (myMTContent && myMTContent.length > 0) {\r\n\t                myMTContent = myMTContent[myMTContent.length - 1].content;\r\n\t            } else {\r\n\t                myMTContent = null;\r\n\t            }\r\n\t            return myMTContent;\r\n\t        } catch (e) {\r\n\t            Trace.traceError(\"getMetaTagContent failed.\", e);\r\n\t            return null;\r\n\t        }\r\n\t    };\r\n\t    insight.setMetaTagContent = function (inMTName, inMTContent) {\r\n\t        if (!inMTContent) {\r\n\t            Trace.traceError(\"FALSE inMTContent found.\");\r\n\t            return;\r\n\t        }\r\n\t        if (insight.getMetaTagContent(inMTName) === null) {\r\n\t            var myMetaTag = document.createElement(\"meta\");\r\n\t            myMetaTag.name = inMTName;\r\n\t            myMetaTag.content = inMTContent;\r\n\t            document.getElementsByTagName(\"head\")[0].appendChild(myMetaTag);\r\n\t        } else {\r\n\t            $(\"meta[name='\" + inMTName + \"']\").attr(\"content\", inMTContent);\r\n\t        }\r\n\t    };\r\n\t    //Common function to fire custom event on clicked element\r\n\t    insight.processWEDCSCustomEventFromArray = function (inArray) {\r\n\t        if (typeof window.MscomCustomEvent !== \"function\") {\r\n\t            return;\r\n\t        } else if (!inArray || inArray.length === 0) {\r\n\t            window.MscomCustomEvent();\r\n\t            return;\r\n\t        }\r\n\t        window.MscomCustomEvent.apply(this, inArray);\r\n\t    };\r\n\t    ////////////////////// BATCH CUSTOM TAG PROCESSING\r\n\t    var wedcsLogTimer = 0;\r\n\t    insight.processAllCustomTags = function () {\r\n\t\r\n\t        customTagsCount = 0;\r\n\t        if (wedcsLogTimer) {\r\n\t            window.clearTimeout(wedcsLogTimer);\r\n\t            wedcsLogTimer = 0;\r\n\t        }\r\n\t\r\n\t        var array = [];\r\n\t        for (var key in customTags) {\r\n\t            if (customTags[key]) {\r\n\t                array.push(key, customTags[key]);\r\n\t                customTags[key] = undefined;\r\n\t            }\r\n\t        }\r\n\t        if (array.length > 0) {\r\n\t            insight.processWEDCSCustomEventFromArray(array);\r\n\t        }\r\n\t    };\r\n\t    // Value will be appended if the key already exists, split by \";\". So \";\" is not allowed in value.\r\n\t    insight.addNewCustomTag = function (key, value) {\r\n\t        if (customTags[key]) {\r\n\t            customTags[key] += \";\" + value;\r\n\t        } else {\r\n\t            customTags[key] = value;\r\n\t        }\r\n\t        customTagsCount ++;\r\n\t        // Process immediately if there are customTagsBatchSize events\r\n\t        if (customTagsCount >= customTagsBatchSize) {\r\n\t            insight.processAllCustomTags();\r\n\t        } else if (!wedcsLogTimer) {\r\n\t            wedcsLogTimer = window.setTimeout(function (){\r\n\t                insight.processAllCustomTags();\r\n\t            }, 1000 * 20);\r\n\t        }\r\n\t    };\r\n\t    insight.setupUnloadTracking = function () {\r\n\t        window.onbeforeunload = function(e) {\r\n\t            insight.processAllCustomTags();\r\n\t            return null;\r\n\t        };\r\n\t    };\r\n\t    ////////////////////// ERROR RELATED\r\n\t    var formatErrorObjectToWedcsArray = function (errorObject) {\r\n\t        var array = [];\r\n\t        if (!errorObject) {\r\n\t            return array;\r\n\t        }\r\n\t        if (errorObject.error) {\r\n\t            if (errorObject.isBubbled) {\r\n\t                if (errorObject.error.data) {\r\n\t                    array.push(\"ms.error\", JSON.stringify(errorObject.error.data).substring(0, 100));\r\n\t                }\r\n\t            } else {\r\n\t                array.push(\"ms.error\", errorObject.error.toString().substring(0, 100));\r\n\t            }\r\n\t        }\r\n\t        if (errorObject.message) {\r\n\t            array.push(\"ms.errormsg\", errorObject.message.substring(0, 30));\r\n\t        }\r\n\t        if (errorObject.source) {\r\n\t            array.push(\"ms.errorsrc\", errorObject.source);\r\n\t        }\r\n\t        if (errorObject.lineno) {\r\n\t            array.push(\"ms.errorlineno\", errorObject.lineno);\r\n\t        }\r\n\t        if (errorObject.colno) {\r\n\t            array.push(\"ms.errorcolno\", errorObject.colno);\r\n\t        }\r\n\t        return array;\r\n\t    };\r\n\t    var errorSubscriber = function (errorObject) {\r\n\t        try {\r\n\t            var tArray = formatErrorObjectToWedcsArray(errorObject);\r\n\t            if (tArray.length > 0) {\r\n\t                insight.processWEDCSCustomEventFromArray(tArray);\r\n\t            }\r\n\t        } catch (ex) {\r\n\t            if (window.console) {\r\n\t                console.error(ex.toString());\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    insight.subscribeErrors = function () {\r\n\t        var Errors = __webpack_require__(4);\r\n\t        Errors.subscribe(errorSubscriber);\r\n\t    };\r\n\t    ////////////////////// Subscribe Trace\r\n\t    var traceSubscriber = function (entry) {\r\n\t        if (!entry) {\r\n\t            return;\r\n\t        }\r\n\t        var navigationStart = window.performance.timing.navigationStart;\r\n\t        if (typeof navigationStart !== \"number\") {\r\n\t            return;\r\n\t        }\r\n\t        if (entry.category === TraceCategory.performance) {\r\n\t            var perfEvent = entry.data;\r\n\t\r\n\t            var customPerfArrary = [];\r\n\t            customPerfArrary.push(perfEvent.name, perfEvent.timeStamp.getTime() - navigationStart);\r\n\t\r\n\t            var array = [];\r\n\t            array.push(\"ms.cus.perf.timing\", customPerfArrary.join());\r\n\t            insight.processWEDCSCustomEventFromArray(array);\r\n\t        }\r\n\t    };\r\n\t    insight.subscribeTrace = function () {\r\n\t        Trace.subscribe(traceSubscriber);\r\n\t    };\r\n\t    ////////////////////// Comment Related\r\n\t    var commentSubscriber = function (widget) {\r\n\t        widget.on(\"commentPosted\", function (data) {\r\n\t            if (data && data.id) {\r\n\t                var array = [];\r\n\t                array.push(\"ms.commentid\", encodeURI(data.id));\r\n\t                array.push(\"ms.commentdt\", new Date().getTime());\r\n\t                array.push(\"ms.commentet\", \"commentPosted\");\r\n\t                insight.processWEDCSCustomEventFromArray(array);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    var commentErrorHandler = function (reason) {\r\n\t        Trace.traceError(\"comment loading failure\", reason);\r\n\t        var array = [];\r\n\t        array.push(\"ms.commenter\", encodeURI(JSON.stringify(reason)));\r\n\t        array.push(\"ms.commentet\", \"commentLoad\");\r\n\t        insight.processWEDCSCustomEventFromArray(array);\r\n\t    };\r\n\t    var sidenoteSubscriber = function (widget) {\r\n\t        widget.on(\"sidenotes.commentPosted\", function (data) {\r\n\t            if (data && data.id) {\r\n\t                var array = [];\r\n\t                array.push(\"ms.commentid\", encodeURI(data.id === null ? null : data.id.replace(\"@\", \"#\")));\r\n\t                array.push(\"ms.commentdt\", new Date().getTime());\r\n\t                array.push(\"ms.commentet\", \"sidenotePosted\");\r\n\t                insight.processWEDCSCustomEventFromArray(array);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    var sidenoteErrorHandler = function (reason) {\r\n\t        Trace.traceError(\"sidenote loading failure\", reason);\r\n\t        var array = [];\r\n\t        array.push(\"ms.commenter\", encodeURI(JSON.stringify(reason)));\r\n\t        array.push(\"ms.commentet\", \"sidenoteLoad\");\r\n\t        insight.processWEDCSCustomEventFromArray(array);\r\n\t    };\r\n\t    insight.setupLiveFyreTracking = function () {\r\n\t        var commenting = __webpack_require__(35);\r\n\t        var commentPromise = commenting.getPromise(\"comment-init\");\r\n\t        if(commentPromise) {\r\n\t            commentPromise.then(commentSubscriber, commentErrorHandler);\r\n\t        } else {\r\n\t            Trace.traceError(\"Failed to get comment promise from commenting-callback\");\r\n\t        }\r\n\t        var sidenotePromise = commenting.getPromise(\"sidenote-init\");\r\n\t        if(sidenotePromise) {\r\n\t            sidenotePromise.then(sidenoteSubscriber, sidenoteErrorHandler);\r\n\t        } else {\r\n\t            Trace.traceError(\"Failed to get sidenote promise from commenting-callback\");\r\n\t        }\r\n\t    };\r\n\t    ////////////////////// FOCUS EVENT\r\n\t    insight.firePageFocusEventAsync = function (type) {\r\n\t        insight.debugLog(\"stepped inside firePageFocusEventAsync function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"tp=\" + type);\r\n\t        tArray.push(\"dt=\" + new Date().getTime());\r\n\t        insight.addNewCustomTag(\"batch.focusevent\", tArray.join());\r\n\t    };\r\n\t    //TODO: The sync version need to be removed after backend jobs are updated\r\n\t    insight.firePageFocusEvent = function (type) {\r\n\t        insight.debugLog(\"stepped inside firePageFocusEvent function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"ms.focuseventtime\", new Date().getTime());\r\n\t        tArray.push(\"ms.focusorblue\", type);\r\n\t        insight.processWEDCSCustomEventFromArray(tArray);\r\n\t\r\n\t        insight.firePageFocusEventAsync(type);\r\n\t    };\r\n\t    insight.setupPageFocusTracking = function () {\r\n\t\r\n\t        $(window).on(\"blur focus\", function (e) {\r\n\t            var prevType = $(this).data(\"prevType\");\r\n\t\r\n\t            if (prevType !== e.type) {   //reduce double fire issues\r\n\t                switch (e.type) {\r\n\t                    case \"blur\":\r\n\t                        insight.debugLog(\"Blured\");\r\n\t                        insight.firePageFocusEvent(\"Blured\");\r\n\t                        break;\r\n\t                    case \"focus\":\r\n\t                        insight.debugLog(\"Focused\");\r\n\t                        insight.firePageFocusEvent(\"Focused\");\r\n\t                        break;\r\n\t                }\r\n\t            }\r\n\t            $(this).data(\"prevType\", e.type);\r\n\t        });\r\n\t\r\n\t    };\r\n\t    ////////////////////// COPY EVENT\r\n\t    insight.fireCopyEvent = function (txt, length) {\r\n\t        insight.debugLog(\"stepped inside fireCopyEvent function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"ms.copyeventtime\", new Date().getTime());\r\n\t        tArray.push(\"ms.copycontent\", txt);\r\n\t        tArray.push(\"ms.copycontentlength\", length);\r\n\t        insight.processWEDCSCustomEventFromArray(tArray);\r\n\t    };\r\n\t    insight.setupCopyTracking = function () {\r\n\t        $(window).bind(\"copy\", function (e) {\r\n\t            var txt = window.getSelection().toString();\r\n\t            var length = txt.length;\r\n\t            txt = txt.substring(0, 20); //truncate to limit the length of WEDCS event\r\n\t            insight.fireCopyEvent(txt, length);\r\n\t        });\r\n\t    };\r\n\t    ////////////////////// SWITCHER SELECTION\r\n\t    insight.fireSwitcherEvent = function (switcher, selectedValue) {\r\n\t        insight.debugLog(\"stepped inside fireSwitcherEvent function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"ms.switcheventtime\", new Date().getTime());\r\n\t        tArray.push(\"ms.switcher\", switcher);\r\n\t        tArray.push(\"ms.switchervalue\", selectedValue);\r\n\t        insight.processWEDCSCustomEventFromArray(tArray);\r\n\t    };\r\n\t    insight.setupSwitcherTracking = function () {\r\n\t        $(\".menu-theme select\").change(function () {\r\n\t            var selectedValue = $(\".menu-theme select\").val();\r\n\t            insight.fireSwitcherEvent(\"theme\", selectedValue);\r\n\t        });\r\n\t        $('.menu-platform select').change(function () {\r\n\t            var selectedValue = $(\".menu-platform select\").val();\r\n\t            insight.fireSwitcherEvent(\"platform\", selectedValue);\r\n\t        });\r\n\t        $('.menu-lang select').change(function () {\r\n\t            var selectedValue = $(\".menu-lang select\").val();\r\n\t            insight.fireSwitcherEvent(\"lang\", selectedValue);\r\n\t        });\r\n\t    };\r\n\t    ////////////////////// SCROLL TRACKING\r\n\t    //Scroll Area definition\r\n\t    insight.scrollArea = function (inName) {\r\n\t        this.name = inName;\r\n\t        this.scrollNA = false;\r\n\t        this.scrollQuarter = false;\r\n\t        this.scrollHalf = false;\r\n\t        this.scrollThreeQuarter = false;\r\n\t        this.scrollBot = false;\r\n\t    };\r\n\t    //Track multiple scroll areas per page\r\n\t    insight.currScrollArea = null;\r\n\t    insight.scrollAreaList = [];\r\n\t\r\n\t    insight.setCurrScrollArea = function (inIndex) {\r\n\t        if (typeof inIndex !== \"number\") {\r\n\t            return;\r\n\t        } else if (insight.scrollAreaList.length <= inIndex) {\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        insight.currScrollArea = insight.scrollAreaList[inIndex];\r\n\t    };\r\n\t\r\n\t    //Page dimension variables\r\n\t    insight.scrollBottomElement = null;\r\n\t    insight.scrollPageHeight = -1;\r\n\t    insight.viewportBottom = -1;\r\n\t    insight.refreshScrollPageDimVars = function () {\r\n\t        var tBottom = 0;\r\n\t        if (insight.scrollBottomElement) {\r\n\t            tBottom = insight.scrollBottomElement.getBoundingClientRect().top + window.pageYOffset;\r\n\t        }\r\n\t        if (tBottom <= 0) {\r\n\t            tBottom = document.body.getBoundingClientRect().height;\r\n\t        }\r\n\t        insight.scrollPageHeight = tBottom;\r\n\t        insight.viewportBottom = window.pageYOffset + window.innerHeight;\r\n\t    };\r\n\t    insight.suppressMobileEvents = false;\r\n\t    insight.fireScrollEvent = function (inScrollValue) {\r\n\t        insight.fireScrollEventSync(inScrollValue, \"scroll\");\r\n\t        insight.fireScrollEventAsync(inScrollValue, \"scroll\");\r\n\t    };\r\n\t    insight.fireScrollStopEvent = function (inScrollValue) {\r\n\t        insight.fireScrollEventSync(inScrollValue, \"scroll-stop\");\r\n\t        insight.fireScrollEventAsync(inScrollValue, \"scroll-stop\");\r\n\t    };\r\n\t    insight.fireScrollEventAsync= function (inScrollValue, eventType) {\r\n\t        insight.debugLog(\"stepped inside fireScrollEventAsync function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"scnum=scroll-\" + inScrollValue);\r\n\t        tArray.push(\"scn=\" + eventType);\r\n\t        tArray.push(\"dt=\" + new Date().getTime());\r\n\t        insight.addNewCustomTag(\"batch.scrollevent\", tArray.join());\r\n\t    };\r\n\t    insight.fireScrollEventSync = function (inScrollValue, eventType) {\r\n\t        insight.debugLog(\"stepped inside fireScrollEvent function\");\r\n\t        var tArray = [];\r\n\t        tArray.push(\"ms.pgarea\", \"body\");\r\n\t        tArray.push(\"ms.scnum\", \"scroll-\" + inScrollValue);\r\n\t        tArray.push(\"ms.interactiontype\", \"4\");\r\n\t        tArray.push(\"ms.scn\", eventType);\r\n\t        insight.processWEDCSCustomEventFromArray(tArray);\r\n\t    };\r\n\t    insight.processScroll = function (stopEvent) {\r\n\t        window.clearTimeout(insight.scrollResizeTimer);\r\n\t        if (insight.currScrollArea === null) {\r\n\t            return;\r\n\t        }\r\n\t        insight.refreshScrollPageDimVars();\r\n\t        if (insight.scrollPageHeight <= 0) {\r\n\t            return;\r\n\t        } else if (insight.suppressMobileEvents && window.innerWidth <= 510) {\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        var tCurrPercent = insight.viewportBottom / insight.scrollPageHeight;\r\n\t\r\n\t        if (stopEvent === true) {\r\n\t            insight.fireScrollStopEvent(Math.round(tCurrPercent * 100) + \"%\");\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        if (window.innerHeight > insight.scrollPageHeight * 0.90) {\r\n\t            //Visitor can see the whole page, fire special -na event\r\n\t            if (!insight.currScrollArea.scrollNA) {\r\n\t                insight.currScrollArea.scrollNA = true;\r\n\t                insight.fireScrollEvent(\"na\");\r\n\t            }\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        if (tCurrPercent > 0.25 && !insight.currScrollArea.scrollQuarter) {\r\n\t            insight.currScrollArea.scrollQuarter = true;\r\n\t            insight.fireScrollEvent(\"25%\");\r\n\t        }\r\n\t        if (tCurrPercent > 0.50 && !insight.currScrollArea.scrollHalf) {\r\n\t            insight.currScrollArea.scrollHalf = true;\r\n\t            insight.fireScrollEvent(\"50%\");\r\n\t        }\r\n\t        if (tCurrPercent > 0.75 && !insight.currScrollArea.scrollThreeQuarter) {\r\n\t            insight.currScrollArea.scrollThreeQuarter = true;\r\n\t            insight.fireScrollEvent(\"75%\");\r\n\t        }\r\n\t        if (tCurrPercent > 0.99 && !insight.currScrollArea.scrollBot) {\r\n\t            insight.currScrollArea.scrollBot = true;\r\n\t            insight.fireScrollEvent(\"100%\");\r\n\t        }\r\n\t    };\r\n\t\r\n\t    insight.scrollTimer = null;\r\n\t    insight.scrollResizeTimer = 0;\r\n\t    insight.setupScrollTracking = function () {\r\n\t        insight.scrollBottomElement = $(\"#footer\")[0];\r\n\t\r\n\t        insight.scrollAreaList.push(new insight.scrollArea(\"body\"));\r\n\t        insight.setCurrScrollArea(0);\r\n\t\r\n\t        window.addEventListener(\"scroll\", function () {\r\n\t            insight.processScroll(false);\r\n\t        });\r\n\t\r\n\t        //catch scroll stop event (stop more than 10 seconds)\r\n\t        if (insight.scrollTimer !== null) {\r\n\t            window.clearTimeout(insight.scrollTimer);\r\n\t        }\r\n\t        insight.scrollTimer = window.setTimeout(function () {\r\n\t            insight.processScroll(true);\r\n\t        }, 1000 * 10);\r\n\t\r\n\t        //Note: resize also catches zoom in/out\r\n\t        $(window).resize(function () {\r\n\t            window.clearTimeout(insight.scrollResizeTimer);\r\n\t            insight.scrollResizeTimer = window.setTimeout(function () {\r\n\t                insight.processScroll(false);\r\n\t            }, 500);\r\n\t        });\r\n\t    };\r\n\t    insight.extractMetaFromAmbientContext = function () {\r\n\t        if (window.AmbientContext) {\r\n\t            for (var key in window.AmbientContext) {\r\n\t                if (window.AmbientContext.hasOwnProperty(key)) {\r\n\t                    var content = window.AmbientContext[key];\r\n\t                    if (content) {\r\n\t                        if (!(typeof(content) === \"string\" || content instanceof String)) {\r\n\t                            content = JSON.stringify(content);\r\n\t                        }\r\n\t                    }\r\n\t                    $(\"head\").append(\"<meta name='ms.\" + encodeURI(key.replace(\".\", \"_\")) +\r\n\t                        \"' content='\" + encodeURI(content) + \"' />\");\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    insight.getPerfTiming = function () {\r\n\t        if (!window.performance || !window.performance.timing) {\r\n\t            return null;\r\n\t        }\r\n\t        var navigationStart = window.performance.timing.navigationStart;\r\n\t        if (typeof navigationStart !== \"number\") {\r\n\t            return null;\r\n\t        }\r\n\t        //Navigation timing attributes, ref: https://w3c.github.io/navigation-timing/\r\n\t        var keys = [\"redirectStart\", \"redirectEnd\", \"fetchStart\", \"connectStart\", \"connectEnd\", \"requestStart\", \"responseStart\",\r\n\t                    \"responseEnd\", \"domLoading\", \"domInteractive\", \"domContentLoadedEventStart\", \"domContentLoadedEventEnd\",\r\n\t                    \"domComplete\", \"loadEventStart\", \"loadEventEnd\"];\r\n\t        var timeInfoArr = [];\r\n\t        for (var index = 0; index < keys.length; index++) {\r\n\t            var key = keys[index];\r\n\t            if (typeof window.performance.timing[key] !== \"number\") {\r\n\t                timeInfoArr.push(\"\");\r\n\t            } else {\r\n\t                var elapsed = window.performance.timing[key] !== 0 ? window.performance.timing[key] - navigationStart : \"\";\r\n\t                timeInfoArr.push(elapsed);\r\n\t            }\r\n\t        }\r\n\t        return timeInfoArr.join();\r\n\t    };\r\n\t    var biMapping = {\r\n\t        \"author\": \"ms.author\",\r\n\t        \"contentlang\": \"ms.contentlang\",\r\n\t        \"depot_name\": \"ms.depotname\",\r\n\t        \"document_id\": \"ms.documentid\",\r\n\t        \"experiment_id\": \"ms.experimentid\",\r\n\t        \"gitcommit\": \"ms.gitcommit\",\r\n\t        \"locale\": \"ms.contentlang\",\r\n\t        \"original_content_git_url\": \"ms.giturl\",\r\n\t        \"pagetype\": \"ms.opspagetype\",\r\n\t        \"site_name\": \"ms.sitename\",\r\n\t        \"updated_at\": \"ms.publishtime\"\r\n\t    };\r\n\t    insight.setupBiTags = function () {\r\n\t        for (var key in biMapping) {\r\n\t            var content = insight.getMetaTagContent(key);\r\n\t            if (content !== null) {\r\n\t                insight.setMetaTagContent(biMapping[key], content);\r\n\t            }\r\n\t        }\r\n\t        var locale = __webpack_require__(7);\r\n\t        var currentLocale = locale.getLanguageFromUrl();\r\n\t        insight.setMetaTagContent(\"ms.locale\", encodeURI(currentLocale));\r\n\t\r\n\t        //add ms.lang and ms.loc if not exist\r\n\t        if (currentLocale) {\r\n\t            var strs = currentLocale.split(\"-\");\r\n\t            if (insight.getMetaTagContent(\"ms.lang\") === null) {\r\n\t                insight.setMetaTagContent(\"ms.lang\", encodeURI(strs[0]));\r\n\t            }\r\n\t            if (insight.getMetaTagContent(\"ms.loc\") === null) {\r\n\t                insight.setMetaTagContent(\"ms.loc\", strs.length > 1 ? encodeURI(strs[1]) : \"\");\r\n\t            }\r\n\t        }\r\n\t\r\n\t        //depot_name is an OP specific metadata, if it exists while ms.contentsource tag is missing, pick it up\r\n\t        //Insight team relies on ms.contentsource to find out all OP pages from WEDCS ocean\r\n\t        if (insight.getMetaTagContent(\"depot_name\") !== null &&\r\n\t                insight.getMetaTagContent(\"ms.contentsource\") === null) {\r\n\t            insight.setMetaTagContent(\"ms.contentsource\", \"OP\");\r\n\t        }\r\n\t    };\r\n\t    insight.isGlobalMetadataEnabled = function (meta) {\r\n\t        if (insight.getMetaTagContent(meta) !== null) {\r\n\t            return true;\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    insight.listMSMetadata = function () {\r\n\t        var res = [];\r\n\t        var arr = $(\"meta[name^='ms.']\");\r\n\t        for (var i = 0; i < arr.length; i++) {\r\n\t            res.push(arr[i].name);\r\n\t        }\r\n\t        return res.join(\", \");\r\n\t    };\r\n\t    insight.enableWEDCS = function () {\r\n\t        //WEDCS base settings\r\n\t        window.varClickTracking = 1;\r\n\t        window.varCustomerTracking = 0;\r\n\t        window.varAutoFirePV = 1;\r\n\t        window.route = \"\";\r\n\t        window.ctrl = \"\";\r\n\t\r\n\t        !/* require */(/* empty */function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(15)]; (function(config){\r\n\t            util.loadLibrary(config.paths.wedcs).then(function () {\r\n\t                insight.subscribeErrors();\r\n\t                insight.subscribeTrace();\r\n\t                insight.setupPageFocusTracking();\r\n\t                insight.setupScrollTracking();\r\n\t                insight.setupCopyTracking();\r\n\t                insight.setupSwitcherTracking();\r\n\t                insight.setupLiveFyreTracking();\r\n\t                insight.setupUnloadTracking();\r\n\t            });\r\n\t        }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}());\r\n\t    };\r\n\t\r\n\t    $(document).ready(function () {\r\n\t        try {\r\n\t            insight.extractMetaFromAmbientContext();\r\n\t            insight.setupBiTags();\r\n\t\r\n\t            //TODO: remove following two lines after backend job is updated to use custom event instead of page view event\r\n\t            //For now, the meta should be added before load ms.js\r\n\t            var perfInfo = insight.getPerfTiming();\r\n\t            if (perfInfo) {\r\n\t                $(\"head\").append(\"<meta name='ms.perf.timing' content='\" + perfInfo + \"' />\");\r\n\t            }\r\n\t\r\n\t            insight.enableWEDCS();\r\n\t        } catch (ex) {\r\n\t            Trace.traceError(ex.toString());\r\n\t        }\r\n\t    });\r\n\t    //Expose jQuery for easy debugging\r\n\t    insight.jQuery = $;\r\n\t    window.insight = insight;\r\n\t})();\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ },\n\n/***/ 37:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(18), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (metadata, locale) {\r\n\t    \"use strict\";\r\n\t    // connect to int by default.\r\n\t    var environment = \"int\";\r\n\t    if (location.hostname === \"docs.microsoft.com\") {\r\n\t        //only connect to prod when it's docs production environment.\r\n\t        environment = \"prod\";\r\n\t    }\r\n\t    var openFeedbackOptions = {\r\n\t        environment: environment,\r\n\t        containerElementId: \"openFeedbackContainer\",\r\n\t        siteNameMetaName: \"site_name\",\r\n\t        documentMetaName: \"document_id\",\r\n\t        localeMetaName: \"locale\", // content locale\r\n\t        uiLocale: locale.getLanguageFromUrl() // user preferred locale specified in url\r\n\t    };\r\n\t\r\n\t    // USER STORY 558937: Send both document_id and ms.assetid when call rating service API\r\n\t    if (metadata.get(\"ms.assetid\")) {\r\n\t        openFeedbackOptions.propertyBag = {\r\n\t            \"ms.assetid\": metadata.get(\"ms.assetid\")\r\n\t        };\r\n\t    }\r\n\t    // load openfeedback\r\n\t    window.openFeedbackOptions = openFeedbackOptions;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n\n/***/ 38:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t    \"use strict\";\r\n\t\r\n\t    /* jshint ignore:start */\r\n\t    (function(e,t,c,n){var o,s,a;e.SMCX=e.SMCX||[],t.getElementById(n)||(o=t.getElementsByTagName(c),s=o[o.length-1],a=t.createElement(c),a.type=\"text/javascript\",a.async=!0,a.id=n,a.src=[\"https:\"===location.protocol?\"https://\":\"http://\",\"widget.surveymonkey.com/collect/website/js/79yNbHm5_2Bc09cabC381UfD6Mz_2FuWCiepbBF6EB_2FT0Ea4MCk82Bh_2BApaijjR77BSR.js\"].join(\"\"),s.parentNode.insertBefore(a,s))})(window,document,\"script\",\"smcx-sdk\");\r\n\t    /* jshint ignore:end */\r\n\t\r\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\n\n/***/ },\n\n/***/ 41:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() {\n\t\treturn new Worker(__webpack_require__.p + \"99089b132ffacfca4aa7.worker.js\");\n\t};\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 48847146010c68e32215.js\n **/","define(\"commenting-callback\", function () {\r\n    \"use strict\";\r\n\r\n    var deferreds = {\r\n        \"comment-init\": $.Deferred(),\r\n        \"sidenote-init\": $.Deferred()\r\n    };\r\n\r\n    module.exports.attach = function (type, handler, errorHandler) {\r\n        var defer = deferreds[type];\r\n        if (defer) {\r\n            defer.promise().then(handler, errorHandler);\r\n        }\r\n    };\r\n\r\n    module.exports.getPromise = function (type) {\r\n        var defer = deferreds[type];\r\n        if (defer) {\r\n            return defer.promise();\r\n        }\r\n        return null;\r\n    };\r\n\r\n    module.exports.resolve = function (type, valueObject) {\r\n        var defer = deferreds[type];\r\n        if (defer) {\r\n            defer.resolve(valueObject);\r\n        }\r\n    };\r\n\r\n    module.exports.reject = function (type, valueObject) {\r\n        var defer = deferreds[type];\r\n        if (defer) {\r\n            defer.reject(valueObject);\r\n        }\r\n    };\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./commenting-callback.js\n ** module id = 35\n ** module chunks = 1 4 6\n **/","(function(){\r\n    \"use strict\";\r\n\r\n    var Trace = require(\"trace\"),\r\n        TraceCategory = Trace.TraceCategory;\r\n    var util = require('util');\r\n    var perfEvents = require('perf.events');\r\n\r\n    if (window.insight) {\r\n        Trace.traceError(\"insight.js is loaded more than once.\");\r\n        return;\r\n    }\r\n    var insight = {};\r\n    var customTags = {};\r\n    var customTagsCount = 0;\r\n    var customTagsBatchSize = 6;\r\n\r\n    insight.debugConsoleLogEnabled = false;\r\n    insight.debugLogMsgs = [];\r\n    insight.debugLog = function (inMsg) {\r\n        insight.debugLogMsgs.push(inMsg);\r\n        if (insight.debugConsoleLogEnabled) {\r\n            console.log(inMsg);\r\n        }\r\n    };\r\n    insight.getMetaTagContent = function (inMTName) {\r\n        try {\r\n            var myMTContent = $(\"meta[name='\" + inMTName + \"']\");\r\n            if (myMTContent && myMTContent.length > 0) {\r\n                myMTContent = myMTContent[myMTContent.length - 1].content;\r\n            } else {\r\n                myMTContent = null;\r\n            }\r\n            return myMTContent;\r\n        } catch (e) {\r\n            Trace.traceError(\"getMetaTagContent failed.\", e);\r\n            return null;\r\n        }\r\n    };\r\n    insight.setMetaTagContent = function (inMTName, inMTContent) {\r\n        if (!inMTContent) {\r\n            Trace.traceError(\"FALSE inMTContent found.\");\r\n            return;\r\n        }\r\n        if (insight.getMetaTagContent(inMTName) === null) {\r\n            var myMetaTag = document.createElement(\"meta\");\r\n            myMetaTag.name = inMTName;\r\n            myMetaTag.content = inMTContent;\r\n            document.getElementsByTagName(\"head\")[0].appendChild(myMetaTag);\r\n        } else {\r\n            $(\"meta[name='\" + inMTName + \"']\").attr(\"content\", inMTContent);\r\n        }\r\n    };\r\n    //Common function to fire custom event on clicked element\r\n    insight.processWEDCSCustomEventFromArray = function (inArray) {\r\n        if (typeof window.MscomCustomEvent !== \"function\") {\r\n            return;\r\n        } else if (!inArray || inArray.length === 0) {\r\n            window.MscomCustomEvent();\r\n            return;\r\n        }\r\n        window.MscomCustomEvent.apply(this, inArray);\r\n    };\r\n    ////////////////////// BATCH CUSTOM TAG PROCESSING\r\n    var wedcsLogTimer = 0;\r\n    insight.processAllCustomTags = function () {\r\n\r\n        customTagsCount = 0;\r\n        if (wedcsLogTimer) {\r\n            window.clearTimeout(wedcsLogTimer);\r\n            wedcsLogTimer = 0;\r\n        }\r\n\r\n        var array = [];\r\n        for (var key in customTags) {\r\n            if (customTags[key]) {\r\n                array.push(key, customTags[key]);\r\n                customTags[key] = undefined;\r\n            }\r\n        }\r\n        if (array.length > 0) {\r\n            insight.processWEDCSCustomEventFromArray(array);\r\n        }\r\n    };\r\n    // Value will be appended if the key already exists, split by \";\". So \";\" is not allowed in value.\r\n    insight.addNewCustomTag = function (key, value) {\r\n        if (customTags[key]) {\r\n            customTags[key] += \";\" + value;\r\n        } else {\r\n            customTags[key] = value;\r\n        }\r\n        customTagsCount ++;\r\n        // Process immediately if there are customTagsBatchSize events\r\n        if (customTagsCount >= customTagsBatchSize) {\r\n            insight.processAllCustomTags();\r\n        } else if (!wedcsLogTimer) {\r\n            wedcsLogTimer = window.setTimeout(function (){\r\n                insight.processAllCustomTags();\r\n            }, 1000 * 20);\r\n        }\r\n    };\r\n    insight.setupUnloadTracking = function () {\r\n        window.onbeforeunload = function(e) {\r\n            insight.processAllCustomTags();\r\n            return null;\r\n        };\r\n    };\r\n    ////////////////////// ERROR RELATED\r\n    var formatErrorObjectToWedcsArray = function (errorObject) {\r\n        var array = [];\r\n        if (!errorObject) {\r\n            return array;\r\n        }\r\n        if (errorObject.error) {\r\n            if (errorObject.isBubbled) {\r\n                if (errorObject.error.data) {\r\n                    array.push(\"ms.error\", JSON.stringify(errorObject.error.data).substring(0, 100));\r\n                }\r\n            } else {\r\n                array.push(\"ms.error\", errorObject.error.toString().substring(0, 100));\r\n            }\r\n        }\r\n        if (errorObject.message) {\r\n            array.push(\"ms.errormsg\", errorObject.message.substring(0, 30));\r\n        }\r\n        if (errorObject.source) {\r\n            array.push(\"ms.errorsrc\", errorObject.source);\r\n        }\r\n        if (errorObject.lineno) {\r\n            array.push(\"ms.errorlineno\", errorObject.lineno);\r\n        }\r\n        if (errorObject.colno) {\r\n            array.push(\"ms.errorcolno\", errorObject.colno);\r\n        }\r\n        return array;\r\n    };\r\n    var errorSubscriber = function (errorObject) {\r\n        try {\r\n            var tArray = formatErrorObjectToWedcsArray(errorObject);\r\n            if (tArray.length > 0) {\r\n                insight.processWEDCSCustomEventFromArray(tArray);\r\n            }\r\n        } catch (ex) {\r\n            if (window.console) {\r\n                console.error(ex.toString());\r\n            }\r\n        }\r\n    };\r\n    insight.subscribeErrors = function () {\r\n        var Errors = require(\"errors\");\r\n        Errors.subscribe(errorSubscriber);\r\n    };\r\n    ////////////////////// Subscribe Trace\r\n    var traceSubscriber = function (entry) {\r\n        if (!entry) {\r\n            return;\r\n        }\r\n        var navigationStart = window.performance.timing.navigationStart;\r\n        if (typeof navigationStart !== \"number\") {\r\n            return;\r\n        }\r\n        if (entry.category === TraceCategory.performance) {\r\n            var perfEvent = entry.data;\r\n\r\n            var customPerfArrary = [];\r\n            customPerfArrary.push(perfEvent.name, perfEvent.timeStamp.getTime() - navigationStart);\r\n\r\n            var array = [];\r\n            array.push(\"ms.cus.perf.timing\", customPerfArrary.join());\r\n            insight.processWEDCSCustomEventFromArray(array);\r\n        }\r\n    };\r\n    insight.subscribeTrace = function () {\r\n        Trace.subscribe(traceSubscriber);\r\n    };\r\n    ////////////////////// Comment Related\r\n    var commentSubscriber = function (widget) {\r\n        widget.on(\"commentPosted\", function (data) {\r\n            if (data && data.id) {\r\n                var array = [];\r\n                array.push(\"ms.commentid\", encodeURI(data.id));\r\n                array.push(\"ms.commentdt\", new Date().getTime());\r\n                array.push(\"ms.commentet\", \"commentPosted\");\r\n                insight.processWEDCSCustomEventFromArray(array);\r\n            }\r\n        });\r\n    };\r\n    var commentErrorHandler = function (reason) {\r\n        Trace.traceError(\"comment loading failure\", reason);\r\n        var array = [];\r\n        array.push(\"ms.commenter\", encodeURI(JSON.stringify(reason)));\r\n        array.push(\"ms.commentet\", \"commentLoad\");\r\n        insight.processWEDCSCustomEventFromArray(array);\r\n    };\r\n    var sidenoteSubscriber = function (widget) {\r\n        widget.on(\"sidenotes.commentPosted\", function (data) {\r\n            if (data && data.id) {\r\n                var array = [];\r\n                array.push(\"ms.commentid\", encodeURI(data.id === null ? null : data.id.replace(\"@\", \"#\")));\r\n                array.push(\"ms.commentdt\", new Date().getTime());\r\n                array.push(\"ms.commentet\", \"sidenotePosted\");\r\n                insight.processWEDCSCustomEventFromArray(array);\r\n            }\r\n        });\r\n    };\r\n    var sidenoteErrorHandler = function (reason) {\r\n        Trace.traceError(\"sidenote loading failure\", reason);\r\n        var array = [];\r\n        array.push(\"ms.commenter\", encodeURI(JSON.stringify(reason)));\r\n        array.push(\"ms.commentet\", \"sidenoteLoad\");\r\n        insight.processWEDCSCustomEventFromArray(array);\r\n    };\r\n    insight.setupLiveFyreTracking = function () {\r\n        var commenting = require(\"commenting-callback\");\r\n        var commentPromise = commenting.getPromise(\"comment-init\");\r\n        if(commentPromise) {\r\n            commentPromise.then(commentSubscriber, commentErrorHandler);\r\n        } else {\r\n            Trace.traceError(\"Failed to get comment promise from commenting-callback\");\r\n        }\r\n        var sidenotePromise = commenting.getPromise(\"sidenote-init\");\r\n        if(sidenotePromise) {\r\n            sidenotePromise.then(sidenoteSubscriber, sidenoteErrorHandler);\r\n        } else {\r\n            Trace.traceError(\"Failed to get sidenote promise from commenting-callback\");\r\n        }\r\n    };\r\n    ////////////////////// FOCUS EVENT\r\n    insight.firePageFocusEventAsync = function (type) {\r\n        insight.debugLog(\"stepped inside firePageFocusEventAsync function\");\r\n        var tArray = [];\r\n        tArray.push(\"tp=\" + type);\r\n        tArray.push(\"dt=\" + new Date().getTime());\r\n        insight.addNewCustomTag(\"batch.focusevent\", tArray.join());\r\n    };\r\n    //TODO: The sync version need to be removed after backend jobs are updated\r\n    insight.firePageFocusEvent = function (type) {\r\n        insight.debugLog(\"stepped inside firePageFocusEvent function\");\r\n        var tArray = [];\r\n        tArray.push(\"ms.focuseventtime\", new Date().getTime());\r\n        tArray.push(\"ms.focusorblue\", type);\r\n        insight.processWEDCSCustomEventFromArray(tArray);\r\n\r\n        insight.firePageFocusEventAsync(type);\r\n    };\r\n    insight.setupPageFocusTracking = function () {\r\n\r\n        $(window).on(\"blur focus\", function (e) {\r\n            var prevType = $(this).data(\"prevType\");\r\n\r\n            if (prevType !== e.type) {   //reduce double fire issues\r\n                switch (e.type) {\r\n                    case \"blur\":\r\n                        insight.debugLog(\"Blured\");\r\n                        insight.firePageFocusEvent(\"Blured\");\r\n                        break;\r\n                    case \"focus\":\r\n                        insight.debugLog(\"Focused\");\r\n                        insight.firePageFocusEvent(\"Focused\");\r\n                        break;\r\n                }\r\n            }\r\n            $(this).data(\"prevType\", e.type);\r\n        });\r\n\r\n    };\r\n    ////////////////////// COPY EVENT\r\n    insight.fireCopyEvent = function (txt, length) {\r\n        insight.debugLog(\"stepped inside fireCopyEvent function\");\r\n        var tArray = [];\r\n        tArray.push(\"ms.copyeventtime\", new Date().getTime());\r\n        tArray.push(\"ms.copycontent\", txt);\r\n        tArray.push(\"ms.copycontentlength\", length);\r\n        insight.processWEDCSCustomEventFromArray(tArray);\r\n    };\r\n    insight.setupCopyTracking = function () {\r\n        $(window).bind(\"copy\", function (e) {\r\n            var txt = window.getSelection().toString();\r\n            var length = txt.length;\r\n            txt = txt.substring(0, 20); //truncate to limit the length of WEDCS event\r\n            insight.fireCopyEvent(txt, length);\r\n        });\r\n    };\r\n    ////////////////////// SWITCHER SELECTION\r\n    insight.fireSwitcherEvent = function (switcher, selectedValue) {\r\n        insight.debugLog(\"stepped inside fireSwitcherEvent function\");\r\n        var tArray = [];\r\n        tArray.push(\"ms.switcheventtime\", new Date().getTime());\r\n        tArray.push(\"ms.switcher\", switcher);\r\n        tArray.push(\"ms.switchervalue\", selectedValue);\r\n        insight.processWEDCSCustomEventFromArray(tArray);\r\n    };\r\n    insight.setupSwitcherTracking = function () {\r\n        $(\".menu-theme select\").change(function () {\r\n            var selectedValue = $(\".menu-theme select\").val();\r\n            insight.fireSwitcherEvent(\"theme\", selectedValue);\r\n        });\r\n        $('.menu-platform select').change(function () {\r\n            var selectedValue = $(\".menu-platform select\").val();\r\n            insight.fireSwitcherEvent(\"platform\", selectedValue);\r\n        });\r\n        $('.menu-lang select').change(function () {\r\n            var selectedValue = $(\".menu-lang select\").val();\r\n            insight.fireSwitcherEvent(\"lang\", selectedValue);\r\n        });\r\n    };\r\n    ////////////////////// SCROLL TRACKING\r\n    //Scroll Area definition\r\n    insight.scrollArea = function (inName) {\r\n        this.name = inName;\r\n        this.scrollNA = false;\r\n        this.scrollQuarter = false;\r\n        this.scrollHalf = false;\r\n        this.scrollThreeQuarter = false;\r\n        this.scrollBot = false;\r\n    };\r\n    //Track multiple scroll areas per page\r\n    insight.currScrollArea = null;\r\n    insight.scrollAreaList = [];\r\n\r\n    insight.setCurrScrollArea = function (inIndex) {\r\n        if (typeof inIndex !== \"number\") {\r\n            return;\r\n        } else if (insight.scrollAreaList.length <= inIndex) {\r\n            return;\r\n        }\r\n\r\n        insight.currScrollArea = insight.scrollAreaList[inIndex];\r\n    };\r\n\r\n    //Page dimension variables\r\n    insight.scrollBottomElement = null;\r\n    insight.scrollPageHeight = -1;\r\n    insight.viewportBottom = -1;\r\n    insight.refreshScrollPageDimVars = function () {\r\n        var tBottom = 0;\r\n        if (insight.scrollBottomElement) {\r\n            tBottom = insight.scrollBottomElement.getBoundingClientRect().top + window.pageYOffset;\r\n        }\r\n        if (tBottom <= 0) {\r\n            tBottom = document.body.getBoundingClientRect().height;\r\n        }\r\n        insight.scrollPageHeight = tBottom;\r\n        insight.viewportBottom = window.pageYOffset + window.innerHeight;\r\n    };\r\n    insight.suppressMobileEvents = false;\r\n    insight.fireScrollEvent = function (inScrollValue) {\r\n        insight.fireScrollEventSync(inScrollValue, \"scroll\");\r\n        insight.fireScrollEventAsync(inScrollValue, \"scroll\");\r\n    };\r\n    insight.fireScrollStopEvent = function (inScrollValue) {\r\n        insight.fireScrollEventSync(inScrollValue, \"scroll-stop\");\r\n        insight.fireScrollEventAsync(inScrollValue, \"scroll-stop\");\r\n    };\r\n    insight.fireScrollEventAsync= function (inScrollValue, eventType) {\r\n        insight.debugLog(\"stepped inside fireScrollEventAsync function\");\r\n        var tArray = [];\r\n        tArray.push(\"scnum=scroll-\" + inScrollValue);\r\n        tArray.push(\"scn=\" + eventType);\r\n        tArray.push(\"dt=\" + new Date().getTime());\r\n        insight.addNewCustomTag(\"batch.scrollevent\", tArray.join());\r\n    };\r\n    insight.fireScrollEventSync = function (inScrollValue, eventType) {\r\n        insight.debugLog(\"stepped inside fireScrollEvent function\");\r\n        var tArray = [];\r\n        tArray.push(\"ms.pgarea\", \"body\");\r\n        tArray.push(\"ms.scnum\", \"scroll-\" + inScrollValue);\r\n        tArray.push(\"ms.interactiontype\", \"4\");\r\n        tArray.push(\"ms.scn\", eventType);\r\n        insight.processWEDCSCustomEventFromArray(tArray);\r\n    };\r\n    insight.processScroll = function (stopEvent) {\r\n        window.clearTimeout(insight.scrollResizeTimer);\r\n        if (insight.currScrollArea === null) {\r\n            return;\r\n        }\r\n        insight.refreshScrollPageDimVars();\r\n        if (insight.scrollPageHeight <= 0) {\r\n            return;\r\n        } else if (insight.suppressMobileEvents && window.innerWidth <= 510) {\r\n            return;\r\n        }\r\n\r\n        var tCurrPercent = insight.viewportBottom / insight.scrollPageHeight;\r\n\r\n        if (stopEvent === true) {\r\n            insight.fireScrollStopEvent(Math.round(tCurrPercent * 100) + \"%\");\r\n            return;\r\n        }\r\n\r\n        if (window.innerHeight > insight.scrollPageHeight * 0.90) {\r\n            //Visitor can see the whole page, fire special -na event\r\n            if (!insight.currScrollArea.scrollNA) {\r\n                insight.currScrollArea.scrollNA = true;\r\n                insight.fireScrollEvent(\"na\");\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (tCurrPercent > 0.25 && !insight.currScrollArea.scrollQuarter) {\r\n            insight.currScrollArea.scrollQuarter = true;\r\n            insight.fireScrollEvent(\"25%\");\r\n        }\r\n        if (tCurrPercent > 0.50 && !insight.currScrollArea.scrollHalf) {\r\n            insight.currScrollArea.scrollHalf = true;\r\n            insight.fireScrollEvent(\"50%\");\r\n        }\r\n        if (tCurrPercent > 0.75 && !insight.currScrollArea.scrollThreeQuarter) {\r\n            insight.currScrollArea.scrollThreeQuarter = true;\r\n            insight.fireScrollEvent(\"75%\");\r\n        }\r\n        if (tCurrPercent > 0.99 && !insight.currScrollArea.scrollBot) {\r\n            insight.currScrollArea.scrollBot = true;\r\n            insight.fireScrollEvent(\"100%\");\r\n        }\r\n    };\r\n\r\n    insight.scrollTimer = null;\r\n    insight.scrollResizeTimer = 0;\r\n    insight.setupScrollTracking = function () {\r\n        insight.scrollBottomElement = $(\"#footer\")[0];\r\n\r\n        insight.scrollAreaList.push(new insight.scrollArea(\"body\"));\r\n        insight.setCurrScrollArea(0);\r\n\r\n        window.addEventListener(\"scroll\", function () {\r\n            insight.processScroll(false);\r\n        });\r\n\r\n        //catch scroll stop event (stop more than 10 seconds)\r\n        if (insight.scrollTimer !== null) {\r\n            window.clearTimeout(insight.scrollTimer);\r\n        }\r\n        insight.scrollTimer = window.setTimeout(function () {\r\n            insight.processScroll(true);\r\n        }, 1000 * 10);\r\n\r\n        //Note: resize also catches zoom in/out\r\n        $(window).resize(function () {\r\n            window.clearTimeout(insight.scrollResizeTimer);\r\n            insight.scrollResizeTimer = window.setTimeout(function () {\r\n                insight.processScroll(false);\r\n            }, 500);\r\n        });\r\n    };\r\n    insight.extractMetaFromAmbientContext = function () {\r\n        if (window.AmbientContext) {\r\n            for (var key in window.AmbientContext) {\r\n                if (window.AmbientContext.hasOwnProperty(key)) {\r\n                    var content = window.AmbientContext[key];\r\n                    if (content) {\r\n                        if (!(typeof(content) === \"string\" || content instanceof String)) {\r\n                            content = JSON.stringify(content);\r\n                        }\r\n                    }\r\n                    $(\"head\").append(\"<meta name='ms.\" + encodeURI(key.replace(\".\", \"_\")) +\r\n                        \"' content='\" + encodeURI(content) + \"' />\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    insight.getPerfTiming = function () {\r\n        if (!window.performance || !window.performance.timing) {\r\n            return null;\r\n        }\r\n        var navigationStart = window.performance.timing.navigationStart;\r\n        if (typeof navigationStart !== \"number\") {\r\n            return null;\r\n        }\r\n        //Navigation timing attributes, ref: https://w3c.github.io/navigation-timing/\r\n        var keys = [\"redirectStart\", \"redirectEnd\", \"fetchStart\", \"connectStart\", \"connectEnd\", \"requestStart\", \"responseStart\",\r\n                    \"responseEnd\", \"domLoading\", \"domInteractive\", \"domContentLoadedEventStart\", \"domContentLoadedEventEnd\",\r\n                    \"domComplete\", \"loadEventStart\", \"loadEventEnd\"];\r\n        var timeInfoArr = [];\r\n        for (var index = 0; index < keys.length; index++) {\r\n            var key = keys[index];\r\n            if (typeof window.performance.timing[key] !== \"number\") {\r\n                timeInfoArr.push(\"\");\r\n            } else {\r\n                var elapsed = window.performance.timing[key] !== 0 ? window.performance.timing[key] - navigationStart : \"\";\r\n                timeInfoArr.push(elapsed);\r\n            }\r\n        }\r\n        return timeInfoArr.join();\r\n    };\r\n    var biMapping = {\r\n        \"author\": \"ms.author\",\r\n        \"contentlang\": \"ms.contentlang\",\r\n        \"depot_name\": \"ms.depotname\",\r\n        \"document_id\": \"ms.documentid\",\r\n        \"experiment_id\": \"ms.experimentid\",\r\n        \"gitcommit\": \"ms.gitcommit\",\r\n        \"locale\": \"ms.contentlang\",\r\n        \"original_content_git_url\": \"ms.giturl\",\r\n        \"pagetype\": \"ms.opspagetype\",\r\n        \"site_name\": \"ms.sitename\",\r\n        \"updated_at\": \"ms.publishtime\"\r\n    };\r\n    insight.setupBiTags = function () {\r\n        for (var key in biMapping) {\r\n            var content = insight.getMetaTagContent(key);\r\n            if (content !== null) {\r\n                insight.setMetaTagContent(biMapping[key], content);\r\n            }\r\n        }\r\n        var locale = require(\"locale\");\r\n        var currentLocale = locale.getLanguageFromUrl();\r\n        insight.setMetaTagContent(\"ms.locale\", encodeURI(currentLocale));\r\n\r\n        //add ms.lang and ms.loc if not exist\r\n        if (currentLocale) {\r\n            var strs = currentLocale.split(\"-\");\r\n            if (insight.getMetaTagContent(\"ms.lang\") === null) {\r\n                insight.setMetaTagContent(\"ms.lang\", encodeURI(strs[0]));\r\n            }\r\n            if (insight.getMetaTagContent(\"ms.loc\") === null) {\r\n                insight.setMetaTagContent(\"ms.loc\", strs.length > 1 ? encodeURI(strs[1]) : \"\");\r\n            }\r\n        }\r\n\r\n        //depot_name is an OP specific metadata, if it exists while ms.contentsource tag is missing, pick it up\r\n        //Insight team relies on ms.contentsource to find out all OP pages from WEDCS ocean\r\n        if (insight.getMetaTagContent(\"depot_name\") !== null &&\r\n                insight.getMetaTagContent(\"ms.contentsource\") === null) {\r\n            insight.setMetaTagContent(\"ms.contentsource\", \"OP\");\r\n        }\r\n    };\r\n    insight.isGlobalMetadataEnabled = function (meta) {\r\n        if (insight.getMetaTagContent(meta) !== null) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    insight.listMSMetadata = function () {\r\n        var res = [];\r\n        var arr = $(\"meta[name^='ms.']\");\r\n        for (var i = 0; i < arr.length; i++) {\r\n            res.push(arr[i].name);\r\n        }\r\n        return res.join(\", \");\r\n    };\r\n    insight.enableWEDCS = function () {\r\n        //WEDCS base settings\r\n        window.varClickTracking = 1;\r\n        window.varCustomerTracking = 0;\r\n        window.varAutoFirePV = 1;\r\n        window.route = \"\";\r\n        window.ctrl = \"\";\r\n\r\n        require([\"docs.config\"], function(config){\r\n            util.loadLibrary(config.paths.wedcs).then(function () {\r\n                insight.subscribeErrors();\r\n                insight.subscribeTrace();\r\n                insight.setupPageFocusTracking();\r\n                insight.setupScrollTracking();\r\n                insight.setupCopyTracking();\r\n                insight.setupSwitcherTracking();\r\n                insight.setupLiveFyreTracking();\r\n                insight.setupUnloadTracking();\r\n            });\r\n        });\r\n    };\r\n\r\n    $(document).ready(function () {\r\n        try {\r\n            insight.extractMetaFromAmbientContext();\r\n            insight.setupBiTags();\r\n\r\n            //TODO: remove following two lines after backend job is updated to use custom event instead of page view event\r\n            //For now, the meta should be added before load ms.js\r\n            var perfInfo = insight.getPerfTiming();\r\n            if (perfInfo) {\r\n                $(\"head\").append(\"<meta name='ms.perf.timing' content='\" + perfInfo + \"' />\");\r\n            }\r\n\r\n            insight.enableWEDCS();\r\n        } catch (ex) {\r\n            Trace.traceError(ex.toString());\r\n        }\r\n    });\r\n    //Expose jQuery for easy debugging\r\n    insight.jQuery = $;\r\n    window.insight = insight;\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./insight.js\n ** module id = 36\n ** module chunks = 1 4 6\n **/","define([\"docs.metadata\", \"locale\"], function (metadata, locale) {\r\n    \"use strict\";\r\n    // connect to int by default.\r\n    var environment = \"int\";\r\n    if (location.hostname === \"docs.microsoft.com\") {\r\n        //only connect to prod when it's docs production environment.\r\n        environment = \"prod\";\r\n    }\r\n    var openFeedbackOptions = {\r\n        environment: environment,\r\n        containerElementId: \"openFeedbackContainer\",\r\n        siteNameMetaName: \"site_name\",\r\n        documentMetaName: \"document_id\",\r\n        localeMetaName: \"locale\", // content locale\r\n        uiLocale: locale.getLanguageFromUrl() // user preferred locale specified in url\r\n    };\r\n\r\n    // USER STORY 558937: Send both document_id and ms.assetid when call rating service API\r\n    if (metadata.get(\"ms.assetid\")) {\r\n        openFeedbackOptions.propertyBag = {\r\n            \"ms.assetid\": metadata.get(\"ms.assetid\")\r\n        };\r\n    }\r\n    // load openfeedback\r\n    window.openFeedbackOptions = openFeedbackOptions;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./rating.js\n ** module id = 37\n ** module chunks = 1 6\n **/","define(function () {\r\n    \"use strict\";\r\n\r\n    /* jshint ignore:start */\r\n    (function(e,t,c,n){var o,s,a;e.SMCX=e.SMCX||[],t.getElementById(n)||(o=t.getElementsByTagName(c),s=o[o.length-1],a=t.createElement(c),a.type=\"text/javascript\",a.async=!0,a.id=n,a.src=[\"https:\"===location.protocol?\"https://\":\"http://\",\"widget.surveymonkey.com/collect/website/js/79yNbHm5_2Bc09cabC381UfD6Mz_2FuWCiepbBF6EB_2FT0Ea4MCk82Bh_2BApaijjR77BSR.js\"].join(\"\"),s.parentNode.insertBefore(a,s))})(window,document,\"script\",\"smcx-sdk\");\r\n    /* jshint ignore:end */\r\n\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./survey.js\n ** module id = 38\n ** module chunks = 1 4 6 8\n **/","module.exports = function() {\n\treturn new Worker(__webpack_public_path__ + \"99089b132ffacfca4aa7.worker.js\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** C:/Program Files (x86)/Jenkins/jobs/docs_template_master_ci/workspace/~/worker-loader!./worker.highlight.js\n ** module id = 41\n ** module chunks = 6\n **/"],"sourceRoot":""}